{% extends 'frontend/phone.html' %}
{% load static %}
{% block title %} : 팝업스토어 상세{% endblock %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/popupstore.css' %}" />
{% endblock %}
{% block content %}
<a href="{% url 'popplace:addfavorite' popup.id %}">즐겨찾기 추가</a>

<!-- 링크 공유 버튼 -->
<div>
    <button onclick="copyToClipboard()">링크 복사</button>
    {% comment %} <a href="https://twitter.com/intent/tweet?text={{ request.build_absolute_uri }}" target="_blank">트위터로 공유</a>
    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank">페이스북으로 공유</a> {% endcomment %}
</div>
<div class="popupstore">팝업 스토어 상세 페이지</div>
<img src="{{ popup.image.url }}" alt="{{ popup.name }}" style="max-width: 100px; max-height: 100px;">
<h2>{{ popup.name }}</h2>
<p>{{ popup.location }}</p>
<p>{{ popup.description }}</p>

<form action="{% url 'popplace:popupreserv' popup.id %}" method="post">
    {% csrf_token %}
    <!-- 예약 관련 폼 -->
    <input type="submit" value="예약하기">
</form>


<h3>{{ average_rating|floatformat:1 }} 리뷰 ({{ review_count }}개)</h3>
<ul>
    {% for review in reviews %}
        <li>
            <div>"{{ review.content }}"</div>
            <div class="star-rating">
                {% for i in "12345" %}
                    <div class="star {% if forloop.counter <= review.rate %}full{% elif forloop.counter == review.rate|stringformat:"i" %}half{% endif %}"></div>
                {% endfor %}
            </div>
        </li>
    {% endfor %}
</ul>



<a href="{% url 'popplace:popupreview' popup.id %}">후기쓰러가기</a>
<script>
    function copyToClipboard() {
        const dummy = document.createElement('input');
        document.body.appendChild(dummy);
        dummy.value = window.location.href;
        dummy.select();
        document.execCommand('copy');
        document.body.removeChild(dummy);
        alert('링크가 클립보드에 복사되었습니다.');
    }
</script>
{% endblock %}
{% block nav %}
{% include './nav/nav_map.html' %}
{% endblock %}
